---
source: "blog"
title: "Add Realistic Mist and Fog to Topography in QGIS 3.2"
date: "2018-10-14T03:56:50+0000"
link: "https://ieqgis.com/2018/10/14/add-realistic-mist-and-fog-to-topography-in-qgis-3-2/"
draft: "false"
showcase: "planet"
subscribers: ["ireland_qgis_user_group_blog"]
author: "Ireland QGIS User Group Blog"
tags: ["qgis", "tutorial", "uncategorized"]
---

<div class="c497l3-6 eCeBkc s1hmcfrd-0 fcsMgH">
<p class="yklcuq-10 hpxQMr">I recently came across a <a href="https://www.esri.com/arcgis-blog/products/arcgis-pro/mapping/steal-this-imhof-like-topography-style-please/">great tutorial</a> by <a class="newsr-art--byline-link mobile-top" href="https://www.esri.com/arcgis-blog/author/j_nelson/">John Nelson</a> in which he demonstrated how to create map of Switzerland in the style of Edward Imhof, the famed Swiss cartographer renowned for his <a href="http://socks-studio.com/2015/01/21/the-map-as-an-artistic-territory-relief-shading-works-and-studies-by-eduard-imhof/">hand painted maps</a> of Switzerland and other mountainous regions of the world. John&#8217;s map used traditional hillshading, <a href="https://opengislab.com/blog/2018/3/20/3d-dem-visualization-in-qgis-30">multidirectional hillshading</a> and crucially, a translucent topographic layer that created a mist like appearance he likened to the <a class="yklcuq-27 RYLdN" href="https://en.wikipedia.org/wiki/Sfumato" rel="noopener" target="_blank">sfumato</a> technique used by painters since the Renascence.</p>
<p>I followed John&#8217;s tutorial in QGIS 3.2 and I was quite pleased with the initial result below. However, the process creating it is a bit too complicated for a tutorial so I set about simplifying the process and rather than imitating Imhof&#8217;s distinct style, my goal this time is realism.</p>
<p><a href="https://ieqgis.wordpress.com/2018/10/14/add-realistic-mist-and-fog-to-topography-in-qgis-3-2/jbaxwkn-1-2/#main" rel="attachment wp-att-1029"><img alt="" class="alignnone size-large wp-image-1029" height="395" src="https://ieqgis.files.wordpress.com/2018/10/jbaxwkn-13.png?w=545&#038;h=395" width="545" /></a></p>
</div>
<p>The heart of the effect involves the very clever idea of using the topographic layer as a subtle opacity mask to simulate mist, fog and atmospheric haze. Have a look at the image below taken on March 17th, 2005 by NASA&#8217;s <a href="https://terra.nasa.gov/about/terra-instruments/modis">Terra satellite</a>. This is the industrialised <a href="https://en.wikipedia.org/wiki/Po_Valley">Po valley</a> of northern Italy, surrounded by the <a href="https://en.wikipedia.org/wiki/Alps">Alps</a> and <a href="https://en.wikipedia.org/wiki/Apennine_Mountains">Apennine Mountains</a> that rise above the valley&#8217;s hazy pollution. The haze adds a sense of depth to the surrounding hills and mountains. It&#8217;s not uncommon to see fog and pollution in satellite imagery that gives way to the clear air in high mountains e.g. <a href="https://eoimages.gsfc.nasa.gov/images/imagerecords/84000/84623/india_tmo_2014300_lrg.jpg">northern India and Nepal</a>, <a href="https://eoimages.gsfc.nasa.gov/images/imagerecords/87000/87129/china_amo_2015341_lrg.jpg">China</a>, <a href="https://eoimages.gsfc.nasa.gov/images/imagerecords/91000/91240/india_amo_2017311_lrg.jpg">Pakistan and India</a>. Creating a similar mist effect in QGIS is actually quite simple.</p>
<div class="c497l3-6 eCeBkc s1hmcfrd-0 fcsMgH">
<p><a href="https://ieqgis.wordpress.com/2018/10/14/add-realistic-mist-and-fog-to-topography-in-qgis-3-2/italy-a2005076-1045-500m-2/#main" rel="attachment wp-att-995"><img alt="" class="alignnone wp-image-995 size-full" height="409" src="https://ieqgis.files.wordpress.com/2018/10/italy-a2005076-1045-500m1.jpg?w=545&#038;h=409" style="border: 2px solid #000000;" width="545" /></a></p>
<p class="yklcuq-10 hpxQMr">First download <a href="https://www.dropbox.com/s/mxnge5e01ynjre0/SwissTopo.zip?dl=0">topography for the Alps and Po region</a> (a 68.55 Mb GeoTiff file derived from freely available <a href="https://land.copernicus.eu/user-corner/publications/eu-dem-flyer/view">EU-DEM</a> data I resampled from 25 to 100m resolution). Next, make sure you have the plugin <a href="http://nextgis.com/blog/qms-service/">QuickMapServics</a> (QMS) installed (menu Plugins &#8211; Manage and Install Plugins). This great plugin provides access to <a href="https://qms.nextgis.com/">over 1000 basemaps</a>.</p>
<p class="yklcuq-10 hpxQMr">Load the GeoTiff file into QGIS (Raster &#8211; Load) and rename the layer Hillshade. Right click the layer to open the Layer Properties window. In the Symbology panel, next to Render Type, choose Hillshade. Change the altitude to 35 degrees, Azimuth to 300 degrees and Z Factor of 1.5 (illuminating the landscape from the top left). Finally, change the Blending mode to Multiply. Click OK to close the dialogue.</p>
<p><a href="https://ieqgis.wordpress.com/2018/10/14/add-realistic-mist-and-fog-to-topography-in-qgis-3-2/hillshade/#main" rel="attachment wp-att-1017"><img alt="" class="alignnone size-full wp-image-1017" height="451" src="https://ieqgis.files.wordpress.com/2018/10/hillshade.png?w=545&#038;h=451" width="545" /></a></p>
<p>To add the basemap layer, Esri World Imagery (Clarity), type &#8220;ESRI clarity&#8221; in the QMS search bar to find and add the basemap; Go to View &#8211; Panels and activate the QMS search bar if it isn&#8217;t initially visible. Make sure it&#8217;s the bottommost layer.</p>
<p>Oh, that&#8217;s a bit disappointing, we only increased the relief little a bit. It&#8217;s missing the vitally important mist layer.</p>
<p>To create mist, right click the Hillshade layer and choose Duplicate. Rename the new layer Mist and make sure it&#8217;s above the Hillshade layer. Now open the Layer Properties window of the layer, we&#8217;re going edit it&#8217;s attributes to make it look like mist.</p>
<p>Change the Render type to Singleband Pseudocolor and use 0 and 3000 for the min and max values (limiting maximum latitude of the mist to 3000 meters). Then open the colour ramp window by clicking on the Color ramp and enter these values:</p>
<ul>
<li>Left Gradient &#8211; HSV 215 15 50 and 75% transparency</li>
<li>Right Gradient &#8211; HSV 215 15 50 and 0% transparency</li>
</ul>
<p><a href="https://ieqgis.wordpress.com/2018/10/14/add-realistic-mist-and-fog-to-topography-in-qgis-3-2/clipboard01-5/#main" rel="attachment wp-att-1001"><img alt="" class="alignnone size-full wp-image-1001" height="420" src="https://ieqgis.files.wordpress.com/2018/10/clipboard014.png?w=545&#038;h=420" width="545" /></a></p>
<p>Close the Color Ramp dialogue. In the Layer Properties window, and this is very important, change the Blending mode to Lighten. Click OK to close the Layer Properties window.</p>
<p>Wow, we have mist!</p>
<div class="wp-caption alignnone" id="attachment_1002" style="width: 1930px;"><a href="https://ieqgis.wordpress.com/2018/10/14/add-realistic-mist-and-fog-to-topography-in-qgis-3-2/swiss/#main" rel="attachment wp-att-1002"><img alt="" class="wp-image-1002 size-full" src="https://ieqgis.files.wordpress.com/2018/10/swiss.png?w=545" style="border: 2px solid #000000;" /></a><p class="wp-caption-text" id="caption-attachment-1002"><a class="jp-carousel-image-download" href="https://ieqgis.files.wordpress.com/2018/10/swiss.png" rel="noopener" target="_blank">(View Full Size)</a></p></div>
<p>The mist effect looks great. It certainly adds a lot of realism to the topographic map, it now looks quite like NASA&#8217;s images. This is just a quick and basic map so there&#8217;s lots of scope to improve the effect. Play around with the colour of the mist layer and its opacity, or even brighten the Hillshade layer underneath. See what effects these changes have.</p>
<p>Here&#8217;s another example below. In this example I duplicated the hillshade layer and set the second hillshade layer to Multidirectional Hillshading (yes, QGIS 3.2 has <a href="https://wp.me/a4xwB9-gm">Multidirectional Hillshading</a>). I then adjusted the transparency of both hillshade layers so they blended together nicely. I then replaced the basemap with another duplicated topography layer that I coloured using the gradient <a href="http://soliton.vm.bytemark.co.uk/pub/cpt-city/jm/sd/tn/sd-a.png.index.html">sd-a</a> (by <a href="http://soliton.vm.bytemark.co.uk/pub/cpt-city/jm/sd/tn/sd-a.png.index.html">Jim Mossman</a>, 2005) using the <a href="http://soliton.vm.bytemark.co.uk/pub/cpt-city/">cpt-city</a> plugin. And lastly, I doubled the opacity of the mist layer turning it into a milky fog. I think it looks great!</p>
<div class="wp-caption alignnone" id="attachment_1002" style="width: 1930px;"><a href="https://ieqgis.wordpress.com/2018/10/14/add-realistic-mist-and-fog-to-topography-in-qgis-3-2/cpy-city-example/#main" rel="attachment wp-att-1009"><img alt="" class="wp-image-1009 size-full" src="https://ieqgis.files.wordpress.com/2018/10/cpy-city-example.png?w=545" style="border: 2px solid #000000;" /></a><p class="wp-caption-text" id="caption-attachment-1002"><a class="jp-carousel-image-download" href="https://ieqgis.files.wordpress.com/2018/10/cpy-city-example.png" rel="noopener" target="_blank">(View Full Size)</a></p></div>
<p>What next? Well, there&#8217;s lots of possibilities. Perhaps download <a href="https://astrogeology.usgs.gov/search/details/Mars/GlobalSurveyor/MOLA/Mars_MGS_MOLA_DEM_mosaic_global_463m/cub">Martian topography</a> and add mist to the bottom of <a href="https://en.wikipedia.org/wiki/Valles_Marineris">Valles Marineris?</a></p>
<p><strong>References:</strong></p>
<p><a href="http://www.reliefshading.com/cartographers/imhof/" rel="nofollow">Eduard Imhof &#8211; Biography</a></p>
<p><a href="https://vimeo.com/164529891" rel="nofollow">TV documentary about Eduard Imhof</a></p>
<p><a href="http://socks-studio.com/2015/01/21/the-map-as-an-artistic-territory-relief-shading-works-and-studies-by-eduard-imhof/" rel="nofollow">The Map as an Artistic Territory: Relief Shading Works and Studies by Eduard Imhof</a></p>
</div>
<p class="editable meta-field photo-desc"><a href="https://visibleearth.nasa.gov/view.php?id=72766">Haze in northern Italy &#8211; NASA Terra Satellite</a></p>
<div class="gs_citr">Tzvetkov, J., 2018. <a href="https://content.sciendo.com/view/journals/pcr/50/2/article-p61.xml">Relief visualization techniques using free and open source GIS tools</a>. <i>Polish Cartographical Review</i>, <i>50</i>(2), pp.61-71.</div>
